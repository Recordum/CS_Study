# 이중모드 & 시스템 호출

## 이중모드(dual mode)

> CPU가 명령어를 실행하는 모드를 크게 __사용자 모드__ 와 __커널 모드__ 로 구분하는 방식.
> 

### 사용자 모드(user mode) vs 커널 모드(kernel mode)
 * 사용자모드 : 운영체제 서비스를 제공받을 수 없는 실행 모드
 * 커널 모드 : 운영체제 서비스를 제공받을 수 있는 실행 모드 -> 커널 영역의 코드를 실행할 수 있는 모드.
 > 커널 모드로 실행되는 CPU는 자원에 접근하는 명령어 등 모든 명령어를 실행 할수 있음.   
>  * _CPU가 어떤 mode로 실행 중인지는 플래그 레지스터 속 슈퍼파이저 플래그로 알 수 있음_

   
## 시스템 호출(system call)
> 사용자 모드로 실행되는 프로그램이 커널모드로 전환하기 위해 하는 소프트에어 인터럽트.

* 사용자 모드로는 자원에 접근할 수 없기 때문에, 운영체제 서비스를 이용하기 위해 응응프로그램에서 시스템 호출은 빈번하게 발생시킨다.
* 시스템 호출 발생 -> CPU 백업 -> 커널영역에서 시스템 호출 코드 실행 -> 기존 실행 프로그램으로 복귀

## (참고) 가상머신(virtual machine)과 이중모드
> 가상머신 또한 응용프로그램이기 때문에 사용자 모드로 동작하게 된다면, 가상머신 위에 응용프로그램들이 커널 모드을 사용하기가 힘들어진다. 
> 이 때문에 가상머신은 하이퍼바이저 모드를 사용한다.
> 하이퍼바이저 모드를 사용하게 되면 가상머신 위에 응용프로그램들이 가상머신에 설치된 운영체제 서비스를 사용할수 있게 된다.